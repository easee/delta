<div>
    <!-- EDIT Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
                    <h4 class="modal-title" id="myModalLabel">
                        Make changes for <strong>{{invoice.invoiceNo}}</strong>
                    </h4>
                </div>

                <!-- Modal Body -->
                <div class="modal-body">
                    <form role="form">
                        <div class="form-group">
                            <label class="hidden">ID</label>
                            <input type="text" class="hidden" ng-model="invoice.id" ng-disabled="invoice.id" />
                        </div>
                        <div class="form-group">
                            <label>Invoice #</label>
                            <input type="text" class="form-control" ng-model="invoice.invoiceNo" />
                        </div>
                        <div class="form-group">
                            <label>Date</label>
                            <input type="text" class="form-control" ng-model="invoice.date" />
                        </div>
                        <div class="form-group">
                            <label>Shipped Date</label>
                            <input type="text" class="form-control" ng-model="invoice.shippedOn" />
                        </div>
                        <!--Dodati select dropdown za statuse-->
                        <div class="form-group">
                            <label>Status</label>
                            <select class="form-control " id="statuses" name="statuses" ng-model="invoice.status" ng-options="getKey(status) as status[getKey(status)] for status in statuses"><option value="" selected>{{invoice.status}}</option></select>
                        </div>
                        <div class="form-group">
                            <label>Sub Total</label>
                            <input type="text" class="form-control" ng-model="invoice.subtotal" />
                        </div>
                        <div class="form-group">
                            <label>VAT</label>
                            <input type="text" class="form-control" ng-model="invoice.vat" ng-disabled="true" />
                        </div>
                        <div class="form-group">
                            <label>VAT Ammount</label>
                            <input type="text" class="form-control" ng-model="invoice.vatamount" />
                        </div>
                        <div class="form-group">
                            <label>Total</label>
                            <input type="text" class="form-control" ng-model="invoice.total" />
                        </div>
                        <div class="form-group">
                            <label>Shipper</label>
                            <select class="form-control" ng-model="invoice.shipperId" ng-options="shipper.id as shipper.name
                                                                    for shipper in shippers"></select>
                        </div>
                        <div class="form-group">
                            <label>Agent</label>
                            <select class="form-control" ng-model="invoice.agentId" ng-options="agent.id as agent.name
                                            for agent in agents"></select>
                        </div>
                        <div class="form-group">
                            <label>Customer</label>
                            <div><input type="text" class="form-control" ng-model="invoice.customer" ng-change="autocomplete(invoice.customer)" ng-keyup="textUp($event)"></div>
                            <select class="form-control" id="custsel" data-style="btn-primary" ng-model="invoice.customerId" ng-options="customer.id as customer.name for customer in customers" ng-keypress="customerSelected($event)"></select>
                        </div>
                        <div class="form-group">
                            <label>Shipping costs</label>
                            <input type="text" class="form-control" ng-model="invoice.shipping" />
                        </div>
                    </form>
                </div>

                <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                            Close
                </button>
                    <button type="button" onclick="$('.modal').modal('hide')" class="btn btn-primary" ng-click="save(item)">
                    Save changes
                </button>
                </div>
            </div>
        </div>
    </div>
    <!--End of Modal-->


    <!-- NEW INVOICE DIV -->
    <div class="modal fade custom" id="myModalNew" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
                    <h4 class="modal-title" id="myModalLabel">
                        Creating Invoice <strong>{{invoice.invoiceNo}}</strong>
                    </h4>
                </div>

                <!-- Modal Body -->
                <div class="modal-body">
                    <form role="form">
                        <div class="form-group">
                            <label class="hidden">ID</label>
                            <input type="text" class="hidden" ng-model="invoice.id" ng-disabled="invoice.id" />
                        </div>
                        <div class="form-group col-xs-4">
                            <label>Invoice #</label>
                            <input type="text" class="form-control" ng-model="invoice.invoiceNo" />
                        </div>
                        <div class="form-group col-xs-4">
                            <label>Date</label>
                            <input type="date" class="form-control" ng-model="invoice.date" />
                        </div>
                        <div class="form-group col-xs-4">
                            <label>Shipped Date</label>
                            <input type="date" class="form-control" ng-model="invoice.shippedOn" />
                        </div>
                        <!--Dodati select dropdown za statuse-->

                        <div class="form-group col-xs-4">
                            <label>Sub Total</label>
                            <input type="number" class="form-control" ng-model="invoice.subTotal" readonly="readonly" />
                        </div>
                        <div class="hidden">
                            <label>VAT</label>
                            <input type="number" class="form-control" ng-model="invoice.vat" readonly="readonly" />
                        </div>
                        <div class="form-group col-xs-2">
                            <label>Taxes</label>
                            <input type="number" class="form-control" ng-model="invoice.vatAmount" readonly="readonly" />
                        </div>
                        <div class="form-group col-xs-2">
                            <label>Shipping</label>
                            <input type="number" class="form-control" ng-model="invoice.shipping" />
                        </div>
                        <div class="form-group col-xs-4">
                            <label>Total</label>
                            <input type="number" class="form-control" ng-model="invoice.total" />
                        </div>
                        <!--Dodati select dropdown za shippera-->
                        <div class="form-group col-xs-4">
                            <label>Shipper</label>
                            <select class="form-control" ng-model="invoice.shipperId" ng-options="shipper.id as shipper.name
                                                                    for shipper in shippers"><option value="" disabled selected> Select your option </option>
                            </select>
                        </div>
                        <div class="form-group col-xs-4">
                            <label>Agent</label>
                            <select class="form-control" ng-model="invoice.agentId" ng-options="agent.id as agent.name
                                                                    for agent in agents"><option value="" disabled selected> Select your option </option>
                            </select>
                        </div>
                        <!--Dodati select dropdown za customera-->
                        <div class="form-group col-xs-4">
                            <label>Customer</label>
                            <div>
                                <input type="text" class="form-control" ng-model="invoice.customer" ng-change="autocomplete(invoice.customer)" ng-keyup="textUp($event)">
                            </div>
                            <select class="form-control" id="custsel1" data-style="btn-primary" ng-model="invoice.customerId" ng-options="customer.id as customer.name for customer in customers" ng-keypress="customerSelected($event)"></select>
                        </div>

                        <div class="form-group col-xs-4">
                            <label>Status</label>
                            <select class="form-control" id="statuses" name="statuses" ng-model="invoice.status" ng-options="getKey(status) as status[getKey(status)] for status in statuses"><option value="" disabled selected> Select your option </option></select>
                        </div>

                        <!--Here starts Typeahead for product-->
                        <!--<div class='container-fluid typeahead-demo'>
                        <pre>Model: {{asyncSelected | json}}</pre>
                        <input type="text" ng-model="asyncSelected" placeholder="Locations loaded via $http" uib-typeahead="product.name for product in getProduct($viewValue)"
                            typeahead-loading="loadingLocations" typeahead-no-results="noResults" class="form-control">
                        <div ng-show="noResults">
                            <i class="fa fa-remove"></i> No Results Found
                        </div>

                        </div>-->

                        <!--<div class="form-group">
                            <label>Town</label>
                            <div><input type="text" class="form-control" ng-model="customer.town" ng-change="autocomplete(customer.town)" ng-keyup="textUp($event)"></div>
                            <select class="form-control" id="townsel" data-style="btn-primary" ng-model="customer.townId" ng-options="town.id as town.name for town in towns" ng-keypress="townSelected($event)"></select>
                        </div>-->
                        <div class="container-fluid">
                            <section class="row">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Product</th>
                                            <th>Qty</th>
                                            <th>Price</th>
                                            <th>SubTotal</th>
                                            <th>Delete</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="item in invoice.items">
                                            <td><input type="text" ng-model="item.productId" placeholder="Enter product" uib-typeahead="product.id as product.name for product in getProduct($viewValue)" typeahead-loading="loadingLocations" typeahead-no-results="noResults"
                                                    class="form-control"></td>
                                            <td><input type="number" ng-model="item.quantity" class="form-control" /></td>
                                            <td><input type="number" ng-model="item.price" class="form-control" /></td>
                                            <td>{{item.quantity * item.price}} €</td>
                                            <td><button type="button" class="btn btn-danger" ng-click="remove($index)"><i class="fa fa-remove" aria-hidden="true" </i></button></td>
                                        </tr>
                                        <tr>
                                            <td><button type="button" class="btn btn-info" ng-click="add()">Add item</button></td>
                                            <td></td>
                                            <td></td>
                                            <td>Total : </td>
                                            <td>{{total()}} €</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>
                        </div>
                    </form>
                </div>

                <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                            Close
                </button>
                    <button type="button" class="btn btn-info" ng-click="saveItem()">
                    Save Items
                </button>
                    <button type="button" onclick="$('.modal').modal('hide')" class="btn btn-primary" ng-click="save()">
                    Create Invoice
                </button>
                </div>
            </div>
        </div>
    </div>
    <!--End of CREATE NEW Modal-->

    <div class="form-group pull-right">
        <td><button type="submit" class="btn btn-sm btn-primary btn-create" data-toggle="modal" ng-click="new(); add()" data-target="#myModalNew" type="submit">
                    <i class="fa fa-plus" aria-hidden="true"></i> INVOICE</button>
        </td>
    </div>

    <div>
        <div class="form-group pull-left">
            <input type="search" class="search form-control" placeholder="Search as you type" ng-model="select">
        </div>
        <div class="form-group pull-left">
            <select class="form-control" ng-model="sort">
                    <option value="" disabled selected>Sort by</option>
                    <option value="id" class="hidden">Id</option>
                    <option value="-total">Total dsc</option>
                    <option value="+total">Total asc</option>
            </select>
        </div>
    </div>
    <table class="table table-striped table-bordered table-list">
        <thead>
            <tr>
                <th class="hidden">ID</th>
                <th><i class="fa fa-user-circle-o" aria-hidden="true"></i> Invoice #</th>
                <th><i class="fa fa-calendar" aria-hidden="true"></i> Date</th>
                <th><i class="fa fa-cube" aria-hidden="true"></i> Shipped On</th>
                <th><i class="fa fa-bell" aria-hidden="true"></i> Status</th>
                <th><i class="fa fa-truck" aria-hidden="true"></i> Shipper</th>
                <th><i class="fa fa-money" aria-hidden="true"></i> Total</th>
                <th>EDIT</th>
                <th admin-view>DELETE</th>
            </tr>
        </thead>
        <tr ng-repeat="item in invoices | filter:select | orderBy:sort">
            <td class="hidden">{{item.id}}</td>
            <td>{{item.invoiceNo}}</td>
            <td>{{item.date}}</td>
            <td>{{item.shippedOn}}</td>
            <td>{{item.status}}</td>
            <td>{{item.shipper}}</td>
            <td>{{item.total}}</td>
            <td> <a href="" ng-click="edit(item)" admin-view><button type="submit" class="btn btn-primary" data-toggle="modal" data-target="#myModal" type="submit"><i class="fa fa-pencil-square-o" aria-hidden="true" ></i></button></a></td>
            <td> <a href="" ng-click="delete(item)"><button type="submit" class="btn btn-danger" type="submit"><i class="fa fa-trash-o" aria-hidden="true" </i></button></a></td>
        </tr>
    </table>
    <div class="alert alert-info" ng-show="(invoices | filter:select).length == 0">
        <strong>Hello Talent!</strong> No results for your search. Watch your fingers.
    </div>
</div>